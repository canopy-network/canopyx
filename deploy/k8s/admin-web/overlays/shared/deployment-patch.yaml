apiVersion: apps/v1
kind: Deployment
metadata:
  name: canopyx-admin-web
spec:
  template:
    spec:
      containers:
        - name: admin-web
          env:
            # Use production mode for optimized build
            - name: NODE_ENV
              value: "production"
          # Strict health checks for production-like behavior
          # Production build is pre-compiled and starts quickly
          livenessProbe:
            httpGet:
              path: /
              port: 3003
            initialDelaySeconds: 10  # Production build starts fast
            periodSeconds: 10        # Check every 10 seconds
            timeoutSeconds: 5        # Stricter timeout
            failureThreshold: 3      # Allow 3 failures before restart
          readinessProbe:
            httpGet:
              path: /
              port: 3003
            initialDelaySeconds: 5   # Ready quickly in production mode
            periodSeconds: 5         # Check more frequently
            timeoutSeconds: 3        # Strict timeout
            failureThreshold: 3      # Allow 3 failures before marking unready
