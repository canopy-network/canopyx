# Auto-generated patch from tilt-config.yaml
# Profile: development | CPU: 1000m/2000m | Memory: 2Gi/4Gi
# Storage: Hot=2Gi | Warm=2Gi | Cold=5Gi | Log=1Gi
apiVersion: clickhouse.altinity.com/v1
kind: ClickHouseInstallation
metadata:
  name: canopyx
spec:
  templates:
    podTemplates:
      - name: clickhouse-pod
        spec:
          containers:
            - name: clickhouse
              image: clickhouse/clickhouse-server:25.8
              env:
                - name: KUBERNETES_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
              volumeMounts:
                - name: hot-volume
                  mountPath: /var/lib/clickhouse/hot
                - name: warm-volume
                  mountPath: /var/lib/clickhouse/warm
                - name: cold-volume
                  mountPath: /var/lib/clickhouse/cold
              resources:
                requests:
                  memory: 2Gi
                  cpu: 1000m
                limits:
                  memory: 4Gi
                  cpu: 2000m
  defaults:
    templates:
      volumeClaimTemplates:
        - name: hot-volume
          spec:
            accessModes:
              - ReadWriteOnce
            resources:
              requests:
                storage: 2Gi

        - name: warm-volume
          spec:
            accessModes:
              - ReadWriteOnce
            resources:
              requests:
                storage: 2Gi

        - name: cold-volume
          spec:
            accessModes:
              - ReadWriteOnce
            resources:
              requests:
                storage: 5Gi

        - name: log-volume
          spec:
            accessModes:
              - ReadWriteOnce
            resources:
              requests:
                storage: 1Gi
